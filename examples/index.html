<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>API Example</title>
  </head>
  <body>
    <p>開発者ツールのコンソールに結果が出ているよ</p>
    <button id="js-Button-1"><span>[POST] /star</span> 星座情報を新規に保存</button>
    <button id="js-Button-2"><span>[GET] /star</span> 登録されている星座情報を取得</button>

    <script>
      // API の URL（将来的に変わる可能性があるので、変更できるように URL を変数化しておくとよい）
      const API_BASE_URL = 'https://8585yx3ghc.execute-api.ap-northeast-1.amazonaws.com/dev';

      const button1 = document.querySelector('#js-Button-1');
      const button2 = document.querySelector('#js-Button-2');

      console.log(button2)

      // 新規保存する星座の名前
      const name = 'ほげほげ'; 

      // 星座を新規保存
      button1.addEventListener('click', () => {
        fetch(`${API_BASE_URL}/star`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            // 星座の名前
            name: name,
            // 星座の画像データ（Base64 形式）
            image: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQYV2NgYGD4DwABBAEAcCBlCwAAAABJRU5ErkJggg==',
            
          }),
        })
          .then((response) => response.json())
          .then((data) => {
            if (data.status === 'OK') {
              console.log('星座を登録しました');
              console.log(data);
            }
          });
      });

      // 日記が投稿されている日付の一覧を取得
      button2.addEventListener('click', () => {
        fetch(`${API_BASE_URL}/star`)
          .then((response) => response.json())
          .then((data) => {
            if (data.status === 'OK') {
              console.log('登録されている星座の情報を取得しました');
              console.log(data);
            }
          });
      });
    </script>
  </body>
    
</html>